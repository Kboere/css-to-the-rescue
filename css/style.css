*, *::before, *::after {
    padding: 0;
    margin: 0 auto;
    box-sizing: border-box;
}

:root {
    --perspective: 1000px;

    --camera-truck: 0px;
    --camera-pedestal: 0px;
    --camera-dolly: -1000px;
    --camera-roll: 0deg;
    --camera-pan: 0deg;
    --camera-tilt: 0deg;
  
    --hue: 223;
    --hue-center: 18;
    --hue-off: 3;
    --hue-on: 133;
    --bg: hsl(var(--hue), 90%, 85%);
    --fg: hsl(var(--hue), 90%, 10%);
    --trans-dur: 0.3s;
    --trans-timing: cubic-bezier(0.65, 0, 0.35, 1);
}

body {
  font-family: sans-serif;
  background-color: #000;
  color: #fff;
  min-height: 100vh;
  display: grid;
  place-items: center;
  perspective: var(--perspective);
  
  *:not(:empty) {
    transform-style: preserve-3d;
  }
}

/*-------------------------*/
/* Switch button (party-mode) */
/*-------------------------*/
  .switch {
    --licked: 0;
    --opacity: calc(1 - var(--licked)* 0.6);
    --scale: calc(1 - var(--licked)* 0.4);
    --scale-y: calc(1 - var(--licked)* 0.2);
    --shadow-n: calc(-0.0625em*(1 - var(--licked)));
    --shadow-p: calc(0.0625em*(1 - var(--licked)));
    position: absolute;
	left: 0;
	top: 0;
    display: block;
    width: fit-content;
    z-index: 99999;
}
  .switch__input {
    cursor: pointer;
    display: block;
    outline: transparent;
    position: relative;
    width: 75px;
    height: 150px;
    transition: background-color var(--trans-dur), box-shadow calc(var(--trans-dur) / 2);
    -webkit-appearance: none;
    appearance: none;
}
  .switch__input:before, .switch__input:after {
    transition: box-shadow var(--trans-dur) var(--trans-timing), transform var(--trans-dur) var(--trans-timing);
  }
  .switch__input:before {
    background-color: hsl(var(--hue), 10%, 90%);
    border-radius: 0.0625em;
    box-shadow: -0.0625em 0 0 white inset, 0 0 0 hsl(var(--hue), 10%, 80%) inset;
    top: 50%;
    left: 0;
    width: calc(100% - 5px);
    height: 10px;
    transform: translateX(0%) rotate(-25deg);
    transform-origin: 0% 0;
}
  .switch__input:after {
    background-color: hsl(var(--hue-center), 70%, 30%);
    border-radius: 50%;
    box-shadow: 0.0625em -0.0625em 0 hsl(var(--hue-center), 70%, 20%) inset, 0 0 0 0.125em hsl(var(--hue-center), 70%, 30%) inset, -0.1875em 0.1875em 0 hsl(var(--hue-center), 70%, 40%) inset;
    top: 2.7em;
    right: 0;
    width: 30px;
    height: 30px;
}
  .switch__input:checked:before {
    transform: rotate(25deg) translateX(4px);
}
  .switch__input:checked:after {
    transform: translateY(4.3em);
}
  .switch__input:focus-visible {
    box-shadow: 0 0 0 0.0625em hsl(var(--hue), 90%, 70%) inset, 0 0 0.125em 0.125em hsl(var(--hue), 90%, 50%);
  }
  .switch__input:before, 
  .switch__input:after {
    content: "";
    display: block;
    position: absolute;
  }
  .switch__label {
    overflow: hidden;
    position: absolute;
    width: 1px;
    height: 1px;
  }

  label:has(input:checked) ~ div:nth-of-type(1) > div {
	background-color: dodgerblue;
  }


/*-------------------------*/
/* buttons viewmodes */
/*-------------------------*/

body > button:nth-of-type(1){
  right: 100px;
}
body > button:nth-of-type(2){
  right: 50px;
}

body > button:nth-of-type(1):active ~ .scene {
    --camera-dolly: 0px;
    --camera-pedestal: 250px;
    --camera-truck: -1200px;
    --camera-pan: 80deg;
    --camera-roll: -15deg;
  }

body > button:nth-of-type(2):active ~ .scene {
    --camera-dolly: 100px;
    --camera-pedestal: 1000px;
    --camera-tilt: 0deg;
    --camera-roll: -100deg;
  }

body > button:nth-of-type(3):active ~ .scene {
    --camera-dolly: -500px;
    --camera-truck: 500px;
    --camera-pan: -45deg;
    --camera-tilt: -10deg;
    --camera-roll: -10deg;
  }

body > button {
  position: fixed;
  top: 0;
  right: 0;
  z-index: 99999;
}

body > div:nth-of-type(1) {
  position: relative;
  transition: transform 1s;
  transform:
    translateZ(var(--perspective))
    
    rotateX(var(--camera-roll))
    rotateY(var(--camera-pan))
    rotateZ(var(--camera-tilt))
    
    translateX(calc(var(--camera-truck) * -1))
    translateY(var(--camera-pedestal))
    translateZ(var(--camera-dolly))
    ;
}

div:nth-of-type(1) > div {
  position: absolute;
  top: 50%; left: 50%;
  width: 1600px; height: 1600px;
  transform: translate(-50%, -50%) rotateX(90deg) translateZ(-180px);
  background-color: darkred;
  background-image:
    radial-gradient(#000a, #0000, #000 60%),
    repeating-linear-gradient(#fff5 0 2px, #fff0 0 30px),
    repeating-linear-gradient(90deg, #fff5 0 2px, #fff0 0 30px)
    ;
}

/*  the box */
article {
	--size-article: 16em;
	--size-output: 3em;

	/* max distance to the left or to the top */
	--distance-max: calc(var(--size-article) - var(--size-output));

	width: var(--size-article);
	aspect-ratio: 1;
	/* background-color:blue; */

	/* output starts at left bottom */
	display: grid;
	place-items: start start;
	transform-style: preserve-3d;
	animation: spin 5s infinite linear paused;
}

article:hover {
	animation-play-state: running;
}

.face {
	position: absolute;
	width: var(--size-article);
	height: 16em;
	left: 0;
	background-color: rgba(255, 255, 255, 0.2);
	border: 1px solid #878787;
}

.front {
	transform: translateZ(8em);
}

.back {
	transform: rotateY(180deg) translateZ(8em);
}

.right {
	transform: rotateY(90deg) translateZ(8em);
}

.left {
	transform: rotateY(-90deg) translateZ(8em);
}

@keyframes spin {
	100% {
		transform: rotateY(360deg);
	}
}

/* output */
@property --up {
	syntax: "<number>";
	inherits: true;
	initial-value: 0;
}

@property --left {
	syntax: "<number>";
	inherits: true;
	initial-value: 0;
}

@property --right {
	syntax: "<number>";
	inherits: true;
	initial-value: 0;
}

@property --down {
	syntax: "<number>";
	inherits: true;
	initial-value: 0;
}

/* all values start at 0 */
@keyframes up {
	to {
		/* --up:5; */
		transform: translateZ(-8em);
	}
}

@keyframes left {
	to {
		--left: 5;
	}
}

@keyframes right {
	to {
		--right: 5;
	}
}

@keyframes down {
	to {
		/* -down:5; */
		transform: translateZ(8em);
	}
}

output {
	display: block;
	width: var(--size-output);
  left: 0;
  position: absolute;
	aspect-ratio: 1;
	background-color: #f09;

	/* // animations control the value of the custom properties
	// start at 0
	// each animation is changed from paused to running with :has in the interaction section */
	animation:
		up 5s linear both paused,
		left 10s linear both paused,
		right 10s linear both paused,
		down 5s linear both paused;

	/* add clamp to keep the output in the article */
	translate: 
		clamp(
			0em, 
			calc((var(--distance-max)) * (var(--right) - var(--left))), 
			var(--distance-max)
		)

	 	clamp(
			0em, 
			calc((var(--distance-max)) * (var(--down) - var(--up))), 
			var(--distance-max)
		)
	;
}

/* interaction */

/* change up animation form paused to running */
section:nth-of-type(1):has(button:nth-of-type(1):active) ~ div:nth-of-type(1) article output{
	animation-play-state: running, paused, paused, paused;
}

section:nth-of-type(1):has(button:nth-of-type(2):active) ~ div:nth-of-type(1) article output {
	animation-play-state: paused, running, paused, paused; 
}

section:nth-of-type(1):has(button:nth-of-type(3):active) ~ div:nth-of-type(1) article output {
	animation-play-state: paused, paused, running, paused;
}

section:nth-of-type(1):has(button:nth-of-type(4):active) ~ div:nth-of-type(1) article output {
	animation-play-state: paused, paused, paused, running;
}

section:nth-of-type(1) {
    position: absolute;
    display: flex;
    background: dodgerblue;
    padding: 20px;
    border-radius: 10px;
    left: 2em;
    z-index: 99999;
}

section:nth-of-type(1) div {
		display: grid;
		grid-template-areas:
			". up ."
			"left . right"
			". down .";
		/* width: 6rem; */
		/* height: 6rem; */
		display: grid;
		/* grid-gap: 0.5rem; */
		/* grid-template-columns: 45fr 60fr 45fr; */
		/* grid-template-rows: 45fr 60fr 45fr; */
		transition: 0.1s;
  transform-style: unset;
	}

section:nth-of-type(1) div button {
	color: #fff;
	background: rgb(55, 50, 50);
	border: none;
	position: relative;
	cursor: pointer;

	clip-path: polygon(0 15%, 62% 15%, 100% 50%, 62% 85%, 0 85%);
	width: 3em;
	height: 3em;
  transform-style: unset;
  z-index: 99999;
}

section:nth-of-type(1) div button:hover,
section:nth-of-type(1) div button:hover:before,
section:nth-of-type(1) div button:focus-visible,
section:nth-of-type(1) div button:focus-visible:before {
	background-color: rgb(85, 55, 55);
	outline: none;
}

section:nth-of-type(1) div button:nth-of-type(1) {
	grid-area: up;
	border-radius: 0.5rem 0.5rem 0 0;
	transform: rotate(90deg);
}

section:nth-of-type(1) div button:nth-of-type(2) {
	grid-area: left;
	border-radius: 0.5rem 0 0 0.5rem;
}

section:nth-of-type(1) div button:nth-of-type(3) {
	grid-area: right;
	border-radius: 0 0.5rem 0.5rem 0;
	transform: rotate(180deg);
}

section:nth-of-type(1) div button:nth-of-type(4) {
	grid-area: down;
	border-radius: 0 0 0.5rem 0.5rem;
	transform: rotate(-90deg);
}

div:has(button:nth-of-type(1):active) {
	transform: perspective(50em) ;
}

div:has(button:nth-of-type(2):active) {
	transform: perspective(50em);
}

div:has(button:nth-of-type(3):active) {
	transform: perspective(50em);
}

div:has(button:nth-of-type(4):active) {
	transform: perspective(50em);
}